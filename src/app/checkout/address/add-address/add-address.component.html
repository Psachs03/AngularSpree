<form class="form" [formGroup]="addressForm" (ngSubmit)="onSubmit()">
  <hr />
  <div class="flex flex-wrap  mt-3">
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label
        >Pin Code
        <span class="required">*</span>
      </label>
      <input
        type="tel"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="zip_code"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('zip_code').errors &&
          addressForm.get('zip_code').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please enter Pincode!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label
        >Mobile No
        <span class="required">*</span>
      </label>
      <input
        type="tel"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="phone"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('phone').errors && addressForm.get('phone').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">
          Please enter valid phone number!
        </p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label
        >First Name
        <span class="required">*</span>
      </label>
      <input
        type="text"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="first_name"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('first_name').errors &&
          addressForm.get('first_name').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please enter first name!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label>
        Last Name
        <span class="required">*</span>
      </label>
      <input
        type="text"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="last_name"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('last_name').errors &&
          addressForm.get('last_name').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please enter last name!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label>
        Locality / Town
        <span class="required">*</span>
      </label>
      <input
        type="text"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="address_line_2"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('address_line_2').errors &&
          addressForm.get('address_line_2').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please enter locality / town!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label
        >City / District
        <span class="required">*</span>
      </label>
      <input
        type="text"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="city"
        autocomplete="none"
      />
      <div
        *ngIf="
          addressForm.get('city').errors && addressForm.get('city').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please enter city / district!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-full pr-4 pl-4">
      <label
        >Address
        <span class="required">*</span>
      </label>
      <textarea
        type="text"
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="address_line_1"
        autocomplete="none"
      ></textarea>
      <div
        *ngIf="
          addressForm.get('address_line_1').errors &&
          addressForm.get('address_line_1').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">
          Please enter address(minimum 10 characters long)!
        </p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label> Country </label>
      <span class="required">*</span>
      <select
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="country_id"
        [(ngModel)]="countryId"
        (change)="selectedCountry(countryId)"
      >
        <ng-template #showDefaultOption>
          <option>Select Country</option>
        </ng-template>
        <option
          *ngIf="
            modifiedAddress != null && !isCountryChanged;
            else showDefaultOption
          "
          [ngValue]="countryId"
          >{{ modifiedAddress.country.name }}</option
        >
        <option *ngFor="let country of countries" [ngValue]="country.id">{{
          country.name
        }}</option>
      </select>
      <div
        *ngIf="
          addressForm.get('country_id').errors &&
          addressForm.get('country_id').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please select country!</p>
      </div>
    </div>
    <div class="mb-4 sm:w-1/2 pr-4 pl-4">
      <label> State </label>
      <span class="required">*</span>
      <select
        class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded"
        formControlName="state_id"
        [(ngModel)]="stateId"
        (change)="selectedState(stateId)"
      >
        <ng-template #showDefault>
          <option>Select State</option>
        </ng-template>
        <option
          *ngIf="modifiedAddress != null && !isStateChanged; else showDefault"
          [ngValue]="stateId"
          >{{ modifiedAddress.state.name }}</option
        >
        <option *ngFor="let state of (states$ | async)" [ngValue]="state.id">{{
          state.name
        }}</option>
      </select>
      <div
        *ngIf="
          addressForm.get('state_id').errors &&
          addressForm.get('state_id').touched
        "
      >
        <p class="value-err text-red-600 opacity-100 block">Please select state!</p>
      </div>
    </div>
    <div *ngIf="isAuthenticated" class="save-button w-full sm:w-1/2 pr-4 pl-4">
      <button class="inline-block align-middle text-center select-none border font-normal whitespace-no-wrap rounded py-1 px-3 leading-normal no-underline themebtnprimary">Save</button>
    </div>
    <div class="w-full sm:w-1/5 pr-4 pl-4 " style="padding-top: 15px;">
      <button
        class="inline-block align-middle text-center select-none border font-normal whitespace-no-wrap rounded py-1 px-3 leading-normal no-underline themebtnprimarybasic mb-3"
        (click)="closeAddressForm()"
      >
        Cancel
      </button>
    </div>
  </div>
</form>
